{% extends "base.html" %}
{% block title %}Inscription · KIABA Rencontres{% endblock %}
{% block description %}Créez votre compte gratuitement sur KIABA Rencontres - Site de petites annonces adultes et services d'escorte en Côte d'Ivoire.{% endblock %}
{% block extra_head %}
<meta name="robots" content="noindex, nofollow" />
<style>
  .password-wrapper {
    position: relative;
  }
  .password-wrapper input[type="password"],
  .password-wrapper input[type="text"] {
    padding-right: 2.5rem;
  }
  .password-toggle {
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    user-select: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  .password-toggle i {
    font-size: 1.2rem;
    color: #64748b;
  }
</style>
{% endblock %}
{% block content %}
<section class="max-w-md mx-auto bg-white rounded-2xl p-6 md:p-8 border shadow-lg">
  <h1 class="text-xl md:text-2xl font-semibold text-slate-900 mb-3">Créer mon compte KIABA</h1>
  {% if form.non_field_errors %}
  <div class="mb-3 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-800">
    {{ form.non_field_errors }}
  </div>
  {% endif %}
  <form method="post" action="{% url 'account_signup' %}" class="space-y-3">{% csrf_token %}
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1" for="{{ form.username.id_for_label }}">Nom d'utilisateur</label>
      {{ form.username }}
      {{ form.username.errors }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1" for="{{ form.email.id_for_label }}">Email</label>
      {{ form.email }}
      {{ form.email.errors }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1" for="{{ form.password1.id_for_label }}">Mot de passe</label>
      <div class="password-wrapper">
      {{ form.password1 }}
        <span class="password-toggle" data-target-id="{{ form.password1.id_for_label }}" aria-label="Afficher ou masquer le mot de passe">
          <i class="bx bx-show eye-on"></i>
          <i class="bx bx-hide eye-off hidden"></i>
        </span>
      </div>
      {{ form.password1.errors }}
    </div>
    <div>
      <label class="block text-sm font-medium text-slate-700 mb-1" for="{{ form.password2.id_for_label }}">Confirmer le mot de passe</label>
      <div class="password-wrapper">
      {{ form.password2 }}
        <span class="password-toggle" data-target-id="{{ form.password2.id_for_label }}" aria-label="Afficher ou masquer le mot de passe">
          <i class="bx bx-show eye-on"></i>
          <i class="bx bx-hide eye-off hidden"></i>
        </span>
      </div>
      {{ form.password2.errors }}
    </div>
    <button type="submit" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition">Créer mon compte</button>
  </form>
  <p class="mt-3 text-sm text-slate-600">Déjà un compte ? <a class="underline" href="{% url 'account_login' %}">Connexion</a></p>
</section>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.password-toggle').forEach(function (toggle) {
      toggle.addEventListener('click', function () {
        const targetId = this.getAttribute('data-target-id');
        const input = document.getElementById(targetId);
        const eyeOn = this.querySelector('.eye-on');
        const eyeOff = this.querySelector('.eye-off');
        if (!input) return;
        if (input.type === 'password') {
          input.type = 'text';
          if (eyeOn && eyeOff) {
            eyeOn.classList.add('hidden');
            eyeOff.classList.remove('hidden');
          }
        } else {
          input.type = 'password';
          if (eyeOn && eyeOff) {
            eyeOn.classList.remove('hidden');
            eyeOff.classList.add('hidden');
          }
        }
      });
    });
  });
</script>
{% endblock %}
